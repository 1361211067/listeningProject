import{d as Ae,r as d,u as we,s as Ve,C as D,D as Be,c as n,a as e,v as r,e as p,E as M,G as P,b as i,n as Ye,F as N,t as q,j as Q,w as h,q as _,o as a,g as Fe,x as C,p as We,l as xe,k as Ue,f as Se,_ as Te}from"./index-f321bc63.js";import{p as Re,e as Ee,f as O}from"./index-741193d7.js";import{C as Ne}from"./ChapterItem-c2d69b2f.js";import{a as f}from"./function-call-5517af3d.js";const qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAAAAABcFtGpAAAAAXNSR0IArs4c6QAABbVJREFUeNrt3Vd63SoUhmHPf6QU9Ua5yk1Osm3v40hICxW+fwjvA2iJ+hHJ6nxAABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhgnZHg3dQ1lTHamKrpJ+cDWO/jxtZq9Rptm34OYH3L0pjPUn/AOg/Wp/7nGvVDmiWA9acDdkb9GN1MAawYY4yzVf+MbjxYMYZBrYoeQvFYodNqZeqldKxmtZVSZigaK7RqS3QXysUKvVbb0vpisaatVkrVvlAsv90qn9bFsHytUpKp4roY1qCTsFQdysPyViWmLw+rT7VSeioNy2uVruUKw+rUjmQYtq6E5cweLD0UhdWrXbG+IKz0T+HvdAVhDTut5Mf462Dt+RT+V8gXg9XutlJmKQRrNvuxpEetq2CFAxqWUpUvAmvWR2CpuQSsUB1ipdoSsLpjrJQOz8c6qBMqpabHY/nqKCvZUusSWM1hVrI/iBfAOqZqyFGXno+1YbH+7Ima07FCfaSVbBF/NtZs1bGRnDA9F+ufW9auNcJ/nDpaHU4lO6l1GlZwvVYSmR+H5cbGKJkMz8IK0//s2b765zA7ll86oyTTPAUrzN2q30DbtMndtHoGVhjsqt6nex9CcIl/QfYJWH7112/YNcll7o/l+9Wlevv3Tyip0Lo9lls/Y2X+VpVziVhhy67alzrJm/K64abd2q+baUvE2jJhZV7/g50u7WsYtmz4+DzRORRXZ41b2tWnxZmkXii5dCiOtWU7n/08gZ5Wlfb3xdqw1Ky/HJRIXEwc74u1fuujHfyXyfm0353ltljL2k5ox6/TwYkr+ua208qrlgS1rfvvzWG84K4jWaxlxbBTvz1Fn7y3rb3t6s6KhvX+QNeSPEEoeYhHFGvFntr3Q8ySPOsseoZHFKtL7DVT+sSzcTfFWnMK4N1azLhjkr6KN8VaUVXq7yVk2LULcLgrVp8yHs/1HivlbooV1uxR+7KPw7f7FhRFe6Ek1rqDSy9fr+CHvUuKw12xlpWzMr/blhvb3auverkr1sofFl1Pzk1ddcSK/n1PWBy1t/0i5bssVp3dSvoIviCWzY4lffBXEMtkx5I9uSOKlX/IcmBdpCJ9GNYE1mWG90cN8OLXOjyodNDznbEyF6X3vrinz4uV4XpXQawpq1UTb43ldM4Ra7k31oEnn89dW73MtPJBMVkupJZcsBge1rBEsZZsZanJcxm16Ip0rkEry72b0lhjrrIhPAArmAeN7tJYmYb4bI8NyGK5HE2rjc/AyrEcVvmnYMlXD7m+hBmw5JtWzqd3xA8NCDetLuczReLHUSbRuYc665NO4liiv9NV1gedMpwKExzjjYsPw5L76TF521Wmk6xCVlN8IJYXWefJsPR1BlZ09gF9MBeWwCBv87erbJdgHK1Vn/Lcb67rVeYjtXR7zkvS2S7uOfDaSDOc9Op2vluO3FEz8naJ8elY0R1SQeR/EPkUrIQXRN/8DY4xFoG1f5jXvY/FYMXQ7HlornYxFoQVw1Qn1wtziGVhxRgmm0S1nE110qWu/cYTYNp2Pl4g51wX7LfcFmzb8RJU511EHdxg15VVkw8xlo0VY4xLZ3/qj9rYdroM1NlYMYZl7JvKvHGq2n5cLiUVL/Hgh/duGrq2qStr67pph3Fx3l8N6hpYNwpYYIEFFlhgEbDAAgsssMAiYIEFFlhggUXAAgsssMACi4AFFlhggQUWAQsssMACCywCFlhggQUWWAQssMACCyywCFhggQUWWGARsMACCyywwCJggQUWWGCBRcACCyywwAKLgAUWWGCBBRYBCyywwAILLAIWWGCBBdZD8wv0N71KNCwuLAAAAABJRU5ErkJggg==",l=V=>(We("data-v-d7bb4148"),V=V(),xe(),V),Qe={class:"play-container"},Ge={class:"play-btn"},Je={class:"header-nav",style:{"z-index":"9"}},ze={class:"nav"},Ke={class:"title"},Le={class:"img-container"},Ze=["src"],He={class:"book-title"},Xe={class:"title"},De={class:"btn-container"},Me=l(()=>e("div",{class:"logo"},null,-1)),Pe=l(()=>e("p",null,"章节目录",-1)),Oe=[Me,Pe],je=l(()=>e("div",{class:"logo"},null,-1)),$e=l(()=>e("div",{class:"logo"},null,-1)),et=l(()=>e("p",null,"跳过片头",-1)),tt=[$e,et],st={class:"range-container"},ot={class:"Texttime"},at={class:"icon-num"},lt=["max","value"],nt={class:"Texttime"},it={class:"change-btn"},ct={key:0,class:"play"},dt={key:1,class:"pause"},rt={class:"recommend-comment"},ut={class:"recommend-container"},vt=l(()=>e("div",{class:"title"},"相关推荐",-1)),mt={class:"content"},pt=["onClick"],ht={class:"img-container"},gt={class:"book-name"},_t={class:"play-count"},ft=l(()=>e("div",{class:"logo"},null,-1)),kt={class:"count"},bt={key:0,class:"comment-container"},yt=l(()=>e("div",{class:"title"},"用户评论",-1)),It={class:"content"},Ct={class:"img-container"},At=["src"],wt={key:1,src:qe,alt:""},Vt={class:"comment-content"},Bt={class:"user-name"},Yt={class:"main"},Ft={class:"time"},Wt={class:"chapter-menu"},xt=l(()=>e("h1",{class:"title"},"章节目录",-1)),Ut={class:"time-menu"},St=l(()=>e("h1",{class:"title"},"定时器",-1)),Tt=l(()=>e("p",null,"时间选择",-1)),Rt={class:"content-container"},Et={class:"btn-container"},Nt={class:"slier-menu"},qt=l(()=>e("h1",{class:"title"},"跳过片头片尾",-1)),Qt={class:"text"},Gt=l(()=>e("span",{class:"redText"},"跳过",-1)),Jt={key:0,class:"redText"},zt={class:"text"},Kt=l(()=>e("span",{class:"redText"},"跳过",-1)),Lt={key:0,class:"redText"},Zt={class:"btn-container"},Ht=Ae({__name:"PlayView",setup(V){const x=Ue(),A=Se(),B=d({}),G=we(),Y=d(!1),k=d(!1),g=d(!1),U=d(!1),J=d(!1),b=d(0),u=d(0),v=d(0),y=d(!1),z=()=>{window.localStorage.setItem("setting",JSON.stringify({bookTopValue:u.value,bookBottomValue:v.value}))},S=d(0),T=d(1),{getChapter:j,getChapterList:K,changeIsPlay:w,changeIsRunBack:$,changeIsRunFast:ee,changeUpdateTime:F,changeRunBookBottom:te}=G,{chapter:m,isPlay:L,playTime:Z,totalTime:se,allTime:oe,secStr:ae,isPlayEnd:le,chapterList:c}=Ve(G);c.value=[];function H(){Re(A.query).then(s=>{j(s.data.data)}),Ee(A.query).then(s=>{B.value=s.data.data}),O({bookId:A.query.bookId,page:1}).then(s=>{K(s.data.data.list),S.value=s.data.data.total})}H();const ne=s=>s/1e4>1?(s/1e4).toFixed(1)+"W+":s;D(le,s=>{if(s==!0){let t=c.value.findIndex(R=>m.value.chapterId==R.chapterId);if(t+1>=c.value.length){f("已经是最后一章了");return}x.replace({name:"play",query:{bookId:m.value.bookId,chapterId:c.value[t+1].chapterId}})}}),D(A,()=>{H()});const ie=()=>{let s=c.value.findIndex(t=>m.value.chapterId==t.chapterId);if(s-1<0){f("已经是第一章了");return}x.replace({name:"play",query:{bookId:m.value.bookId,chapterId:c.value[s-1].chapterId}})},ce=()=>{let s=c.value.findIndex(t=>m.value.chapterId==t.chapterId);if(s+1>=c.value.length){f("已经是最后一章了");return}x.replace({name:"play",query:{bookId:m.value.bookId,chapterId:c.value[s+1].chapterId}})},de=()=>{f("- 15秒"),$(!0)},re=()=>{f("+ 15秒"),ee(!0)},ue=()=>{c.value.length<S.value&&(T.value=T.value+1,O({bookId:A.query.bookId,page:T.value}).then(s=>{K(s.data.data.list),U.value=!1,c.value.length>=S.value&&(J.value=!0)}))},ve=()=>{u.value=0,v.value=0,f("删除成功"),k.value=!1},me=()=>{window.localStorage.setItem("setting",JSON.stringify({bookTopValue:u.value,bookBottomValue:v.value})),f("保存成功"),k.value=!1};Be(()=>{let s=JSON.parse(window.localStorage.getItem("setting"));JSON.stringify(s)!="{}"&&s&&(u.value=s.bookTopValue,v.value=s.bookBottomValue),v.value&&te(v.value)});const pe=()=>{b.value=0,y.value=!1,w(!1)},I=s=>{if(!y.value){if(s.includes("秒")){let t=parseInt(s);b.value=t*1e3}else if(s.includes("分钟")){let t=parseInt(s);b.value=t*60*1e3}else{let t=parseInt(s);b.value=t*60*60*1e3}y.value=!0,g.value=!1}},he=()=>{y.value=!1,b.value=0,g.value=!1},ge=()=>{g.value=!1},_e=()=>{u.value&&!Z.value&&F(u.value),w(!L.value)},fe=s=>{w(!0),F(Number(s.target.value))},ke=s=>{w(!1),F(Number(s.target.value))},be=s=>{w(!1),F(Number(s.target.value))};return(s,t)=>{const R=_("van-count-down"),ye=_("van-loading"),Ie=_("van-image"),Ce=_("van-list"),E=_("van-popup"),W=_("van-button"),X=_("van-slider");return a(),n("div",Qe,[e("div",Ge,[e("div",Je,[e("div",ze,[e("div",{class:"back-logo",onClick:t[0]||(t[0]=o=>s.$router.back())}),e("p",Ke,r(p(m).bookTitle),1)])]),e("div",Le,[e("img",{src:p(m).bookImage,alt:""},null,8,Ze)]),e("div",He,[e("p",Xe,r(p(m).chapterTitle),1)]),e("div",De,[e("div",{class:"btn",onClick:t[1]||(t[1]=o=>Y.value=!Y.value)},Oe),e("div",{class:"btn",onClick:t[2]||(t[2]=o=>g.value=!g.value)},[je,M(e("p",null,"定时器",512),[[P,!y.value]]),M(e("p",null,[i(R,{style:{color:"#fff"},time:b.value,onFinish:pe},null,8,["time"])],512),[[P,y.value]])]),e("div",{class:"btn",onClick:t[3]||(t[3]=o=>k.value=!k.value)},tt)]),e("div",st,[e("span",ot,r(p(ae)),1),e("div",at,[e("input",{class:"gradient",type:"range",min:"0",max:p(oe),value:p(Z),style:Ye({backgroundSize:`${p(se)}% 100%`}),onChange:t[4]||(t[4]=o=>fe(o)),onTouchmove:ke,onInput:be},null,44,lt)]),e("span",nt,r(p(m).time),1)]),e("div",it,[e("div",{class:"item",onClick:de}),e("div",{class:"item",onClick:ie}),e("div",{class:"play-pause",onClick:_e},[p(L)?(a(),n("div",dt)):(a(),n("div",ct))]),e("div",{class:"item",onClick:ce}),e("div",{class:"item",onClick:re})])]),e("div",rt,[e("div",ut,[vt,e("div",mt,[(a(!0),n(N,null,q(B.value.books,o=>(a(),n("div",{class:"item",key:o.bookId,onClick:Xt=>s.$router.replace({name:"bookDetail",params:{bookId:o.bookId}})},[e("div",ht,[i(Ie,{src:o.bookImage,width:"108rem",height:"108rem",fit:"cover"},{loading:h(()=>[i(ye,{type:"spinner",size:"20"})]),_:2},1032,["src"])]),e("div",gt,r(o.bookTitle),1),e("div",_t,[ft,e("div",kt,r(ne(o.playTotal)),1)])],8,pt))),128))])]),B.value.comments?(a(),n("div",bt,[yt,e("div",It,[(a(!0),n(N,null,q(B.value.comments,o=>(a(),n("div",{class:"item",key:o.commentId},[e("div",Ct,[o.userImage?(a(),n("img",{key:0,src:o.userImage,alt:""},null,8,At)):(a(),n("img",wt))]),e("div",Vt,[e("h5",Bt,r(o.commentsName),1),e("p",Yt,r(o.commentsContent),1),e("p",Ft,r(o.time),1)])]))),128))])])):Q("",!0)]),i(E,{show:Y.value,"onUpdate:show":t[6]||(t[6]=o=>Y.value=o),position:"bottom",style:{height:"40%"},closeable:"",round:""},{default:h(()=>[e("div",Wt,[xt,i(Ce,{class:"chapterList",loading:U.value,"onUpdate:loading":t[5]||(t[5]=o=>U.value=o),finished:J.value,"finished-text":"没有更多了",onLoad:ue,"immediate-check":!1},{default:h(()=>[(a(!0),n(N,null,q(p(c),o=>(a(),Fe(Ne,{key:o.chapterId,item:o},null,8,["item"]))),128))]),_:1},8,["loading","finished"])])]),_:1},8,["show"]),i(E,{class:"time-btn",show:g.value,"onUpdate:show":t[13]||(t[13]=o=>g.value=o),position:"bottom",style:{height:"40%"},closeable:"",round:""},{default:h(()=>[e("div",Ut,[St,Tt,e("div",Rt,[e("div",{class:"item",onClick:t[7]||(t[7]=o=>I("10秒"))},"10秒"),e("div",{class:"item",onClick:t[8]||(t[8]=o=>I("30秒"))},"30秒"),e("div",{class:"item",onClick:t[9]||(t[9]=o=>I("1分钟"))},"1分钟"),e("div",{class:"item",onClick:t[10]||(t[10]=o=>I("15分钟"))},"15分钟"),e("div",{class:"item",onClick:t[11]||(t[11]=o=>I("30分钟"))},"30分钟"),e("div",{class:"item",onClick:t[12]||(t[12]=o=>I("1小时"))},"1小时")]),e("div",Et,[i(W,{color:"linear-gradient(to right, #ff6d6a,#f95553)",onClick:he},{default:h(()=>[C("停止定时")]),_:1}),i(W,{color:"linear-gradient(to right, #ff6d6a,#f95553)",onClick:ge},{default:h(()=>[C("关闭")]),_:1})])])]),_:1},8,["show"]),i(E,{show:k.value,"onUpdate:show":t[16]||(t[16]=o=>k.value=o),position:"bottom",style:{height:"40%"},closeable:"",round:""},{default:h(()=>[e("div",Nt,[qt,e("p",Qt,[Gt,C("片头 "),u.value!=0?(a(),n("span",Jt,r(u.value)+"秒",1)):Q("",!0)]),i(X,{"active-color":"#e06859","inactive-color":"repeating-linear-gradient(to right,#f1cfcc, #edaea8,#f1cfcc,#edaea8,#f1cfcc,#edaea8,#f1cfcc,#edaea8,#f1cfcc,#edaea8,#f1cfcc,#edaea8)",max:"60",modelValue:u.value,"onUpdate:modelValue":t[14]||(t[14]=o=>u.value=o),onChange:z},null,8,["modelValue"]),e("p",zt,[Kt,C("片尾 "),v.value!=0?(a(),n("span",Lt,r(v.value)+"秒",1)):Q("",!0)]),i(X,{"active-color":"#e06859","inactive-color":"repeating-linear-gradient(to right,#f1cfcc, #edaea8,#f1cfcc,#edaea8,#f1cfcc,#edaea8,#f1cfcc,#edaea8,#f1cfcc,#edaea8,#f1cfcc,#edaea8)",max:"60",modelValue:v.value,"onUpdate:modelValue":t[15]||(t[15]=o=>v.value=o),onChange:z},null,8,["modelValue"]),e("div",Zt,[i(W,{color:"linear-gradient(to right, #ff6d6a,#f95553)",onClick:ve},{default:h(()=>[C("删除设置")]),_:1}),i(W,{color:"linear-gradient(to right, #ff6d6a,#f95553)",onClick:me},{default:h(()=>[C("保存设置")]),_:1})])])]),_:1},8,["show"])])}}});const jt=Te(Ht,[["__scopeId","data-v-d7bb4148"]]);export{jt as default};
